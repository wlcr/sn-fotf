# Project Commands & Shortcuts

This document contains project-specific commands and workflows that have been tested and work reliably for this Sierra Nevada Friends of the Family project.

## GitHub CLI Commands

### Get PR Review Comments (Line-by-Line)

To get detailed inline code review comments from GitHub Copilot or other reviewers:

```bash
gh api repos/wlcr/sn-fotf/pulls/{PR_NUMBER}/comments
```

Example:

```bash
gh api repos/wlcr/sn-fotf/pulls/9/comments
```

This returns the actual inline review comments with:

- File paths and line numbers
- Diff hunks showing context
- Specific suggestions and feedback
- Comment metadata (author, timestamps, etc.)

**Note:** This is different from `gh pr view --comments` which only shows general PR discussion comments, not the inline code review feedback.

### Other Useful PR Commands

```bash
# View PR overview
gh pr view {PR_NUMBER}

# View PR status checks
gh pr checks {PR_NUMBER}

# View general PR discussion (not code review comments)
gh pr view {PR_NUMBER} --comments
```

## Development Workflow

### Quality Checks Before Deployment

```bash
# Run the full quality check pipeline
npm run quality-check

# Individual checks
npm run type-check
npm run lint
npm run sanity:codegen
npm run bundle:check
```

### Bundle Size Monitoring

```bash
# Check current bundle size
npm run build
ls -lh dist/server/index.js

# Should be < 2MB for Oxygen deployment
# If larger, check bundle analyzer
open dist/server/server-bundle-analyzer.html
```

### Studio Development

```bash
# Clean studio cache if issues
npm run studio:clean
rm -rf node_modules/.sanity

# Test studio loading
npm run dev
# Visit http://localhost:3000/studio
```

### Troubleshooting Hung Processes

```bash
# Graceful termination first
lsof -ti:3000 | xargs kill -TERM 2>/dev/null || true
lsof -ti:3001 | xargs kill -TERM 2>/dev/null || true
sleep 2
# Force kill if needed
lsof -ti:3000 | xargs kill -9 2>/dev/null || true
lsof -ti:3001 | xargs kill -9 2>/dev/null || true
```

## Project-Specific Notes

- **Repository**: `wlcr/sn-fotf` (WLCR organization)
- **Default branch**: `main`
- **Studio embedded at**: `/studio` route
- **Critical**: Bundle size must stay under 2MB for Oxygen deployment
- **Studio config**: Don't modify `studio/sanity.config.ts` require() patterns - they work correctly for embedded setup
